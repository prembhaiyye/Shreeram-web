{% extends "base.html" %}

{% block content %}
<div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
    <a href="{{ url_for('views.monitor') }}" class="btn"
        style="width: auto; padding: 0.5rem 1rem; background: transparent; color: var(--text-secondary);">‚Üê Back</a>
    <h1 style="text-transform: capitalize;">{{ sensor_type }} History</h1>
</div>

<!-- Related Control Card (Example Logic) -->
{% if sensor_type == 'temperature' %}
<div class="card" style="margin-bottom: 2rem; border-left: 5px solid var(--primary-color);">
    <div class="card-header">
        <span class="card-title">Related Control</span>
        <span class="status-badge status-online">Auto</span>
    </div>
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <span style="font-weight: 600;">Environmental Fan</span>
        <label class="switch">
            <input type="checkbox" checked disabled> <!-- Simulate State -->
            <span class="slider round"></span>
        </label>
    </div>
</div>
{% endif %}

<div class="card">
    <div style="display: flex; justify-content: flex-end; gap: 0.5rem; margin-bottom: 1rem;">
        <button class="btn" style="width: auto; font-size: 0.8rem; padding: 0.25rem 0.5rem;">1H</button>
        <button class="btn btn-primary" style="width: auto; font-size: 0.8rem; padding: 0.25rem 0.5rem;">24H</button>
        <button class="btn" style="width: auto; font-size: 0.8rem; padding: 0.25rem 0.5rem;">1W</button>
        <button class="btn" style="width: auto; font-size: 0.8rem; padding: 0.25rem 0.5rem;">1M</button>
    </div>
    <canvas id="sensorChart" width="400" height="200"></canvas>
</div>

<div class="card-grid" style="margin-top: 1.5rem; grid-template-columns: repeat(3, 1fr);">
    <div class="card" style="text-align: center; padding: 1rem;">
        <div class="card-title">Highest</div>
        <div class="card-value" style="font-size: 1.5rem;">28.5</div>
    </div>
    <div class="card" style="text-align: center; padding: 1rem;">
        <div class="card-title">Lowest</div>
        <div class="card-value" style="font-size: 1.5rem;">22.1</div>
    </div>
    <div class="card" style="text-align: center; padding: 1rem;">
        <div class="card-title">Average</div>
        <div class="card-value" style="font-size: 1.5rem;">25.3</div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    const ctx = document.getElementById('sensorChart').getContext('2d');
    const chart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '24:00'],
            datasets: [{
                label: '{{ sensor_type|capitalize }}',
                data: [22, 23, 25, 28, 27, 24, 23], // Dummy data
                borderColor: '#3182ce',
                backgroundColor: 'rgba(49, 130, 206, 0.1)',
                fill: true,
                tension: 0.4
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    display: false
                }
            },
            scales: {
                y: {
                    beginAtZero: false
                }
            }
        }
    });
</script>
{% endblock %}